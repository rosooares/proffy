{"version":3,"sources":["NativeAppearance.web.tsx"],"names":["React","View","SyntheticPlatformEmitter","getQuery","window","matchMedia","isMediaQueryList","query","addListener","removeListener","matches","NativeAppearance","name","initialPreferences","colorScheme","NativeAppearanceProvider","props","useEffect","listener","emit","flex"],"mappings":"oJAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,OAASC,IAAT,KAAqB,cAArB,CAIA,MAAOC,CAAAA,wBAAP,KAAqC,gCAArC,CAEA,QAASC,CAAAA,QAAT,EAA2C,CACzC,GAAI,MAAOC,CAAAA,MAAP,GAAkB,WAAlB,EAAiC,CAACA,MAAM,CAACC,UAA7C,CAAyD,MAAO,KAAP,CACzD,MAAOD,CAAAA,MAAM,CAACC,UAAP,CAAkB,8BAAlB,CAAP,CACD,CAED,QAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAA+D,CAC7D,MAAOA,CAAAA,KAAK,EAAIA,KAAK,CAACC,WAAf,EAA8BD,KAAK,CAACE,cAApC,EAAsD,MAAOF,CAAAA,KAAK,CAACG,OAAb,GAAyB,SAAtF,CACD,CAED,MAAO,IAAMC,CAAAA,gBAAgB,CAAG,CAC9B,GAAIC,CAAAA,IAAJ,EAAmB,CACjB,MAAO,kBAAP,CACD,CAH6B,CAI9B,GAAIC,CAAAA,kBAAJ,EAAgD,CAC9C,GAAMN,CAAAA,KAAK,CAAGJ,QAAQ,EAAtB,CACA,GAAIG,gBAAgB,CAACC,KAAD,CAApB,CAA6B,CAC3B,MAAO,CAAEO,WAAW,CAAEP,KAAK,CAACG,OAAN,CAAgB,MAAhB,CAAyB,OAAxC,CAAP,CACD,CACD,MAAO,CAAEI,WAAW,CAAE,eAAf,CAAP,CACD,CAV6B,CAAzB,CAaP,MAAO,SAASC,CAAAA,wBAAT,CAAkCC,KAAlC,CAA8C,CACnDhB,KAAK,CAACiB,SAAN,CAAgB,UAAM,CACpB,GAAMV,CAAAA,KAAK,CAAGJ,QAAQ,EAAtB,CAEA,QAASe,CAAAA,QAAT,MAAoD,IAAhCR,CAAAA,OAAgC,MAAhCA,OAAgC,CAClD,GAAMI,CAAAA,WAAW,CAAGJ,OAAO,CAAG,MAAH,CAAY,OAAvC,CACAR,wBAAwB,CAACiB,IAAzB,CAA8B,mBAA9B,CAAmD,CACjDL,WAAW,CAAXA,WADiD,CAAnD,EAGD,CAED,GAAIP,KAAJ,CACEA,KAAK,CAACC,WAAN,CAAkBU,QAAlB,EAEF,MAAO,WAAM,CACX,GAAIX,KAAJ,CAAW,CACTA,KAAK,CAACE,cAAN,CAAqBS,QAArB,EACD,CACF,CAJD,CAKD,CAlBD,CAkBG,EAlBH,EAoBA,MAAO,qBAAC,IAAD,WAAM,KAAK,CAAE,CAAEE,IAAI,CAAE,CAAR,CAAb,EAA8BJ,KAA9B,mDAAP,CACD","sourcesContent":["import * as React from 'react';\nimport { View } from 'react-native';\n\nimport { AppearancePreferences } from './Appearance.types';\n// @ts-ignore\nimport SyntheticPlatformEmitter from './web/SyntheticPlatformEmitter';\n\nfunction getQuery(): MediaQueryList | null {\n  if (typeof window === 'undefined' || !window.matchMedia) return null;\n  return window.matchMedia('(prefers-color-scheme: dark)');\n}\n\nfunction isMediaQueryList(query: any): query is MediaQueryList {\n  return query && query.addListener && query.removeListener && typeof query.matches === 'boolean';\n}\n\nexport const NativeAppearance = {\n  get name(): string {\n    return 'NativeAppearance';\n  },\n  get initialPreferences(): AppearancePreferences {\n    const query = getQuery();\n    if (isMediaQueryList(query)) {\n      return { colorScheme: query.matches ? 'dark' : 'light' }\n    }\n    return { colorScheme: 'no-preference' };\n  },\n};\n\nexport function NativeAppearanceProvider(props: any) {\n  React.useEffect(() => {\n    const query = getQuery();\n\n    function listener({ matches }: MediaQueryListEvent) {\n      const colorScheme = matches ? 'dark' : 'light';\n      SyntheticPlatformEmitter.emit('appearanceChanged', {\n        colorScheme,\n      });\n    }\n\n    if (query)\n      query.addListener(listener);\n\n    return () => {\n      if (query) {\n        query.removeListener(listener)\n      }\n    }\n  }, []);\n\n  return <View style={{ flex: 1 }} {...props} />\n};\n"]}